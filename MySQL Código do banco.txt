-- Cria o banco de dados se não existir
CREATE DATABASE IF NOT EXISTS projeto_patrica;
USE projeto_patrica;

-- Tabela de formas de pagamento
CREATE TABLE IF NOT EXISTS FORMA_PAGAMENTO
(
    ID_FORMA_PAGAMENTO INT AUTO_INCREMENT PRIMARY KEY,
    DESCRICAO VARCHAR(40) NOT NULL UNIQUE,
    ATIVO BOOLEAN NOT NULL DEFAULT TRUE,
    DATA_CADASTRO DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    DATA_ULTIMA_EDICAO DATE NULL
);

-- Tabela de condições de pagamento
CREATE TABLE IF NOT EXISTS CONDICAO_PAGAMENTO 
(
    ID_CONDICAO_PAGAMENTO INT AUTO_INCREMENT PRIMARY KEY,
    DESCRICAO VARCHAR(40) NOT NULL UNIQUE,
    QUANTIDADE_PARCELAS INT NOT NULL,
    JUROS DECIMAL(5,2) NOT NULL DEFAULT 0,
    MULTA DECIMAL(5,2) NOT NULL DEFAULT 0,
    DESCONTO DECIMAL(5,2) NOT NULL DEFAULT 0,
    ATIVO BOOLEAN NOT NULL DEFAULT TRUE,
    DATA_CADASTRO DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    DATA_ULTIMA_EDICAO DATE NULL
);

-- Tabela de parcelas da condição de pagamento
CREATE TABLE IF NOT EXISTS PARCELA_CONDICAO_PAGAMENTO 
(
    ID_CONDICAO_PAGAMENTO INT NOT NULL,
    NUMERO_PARCELA INT NOT NULL,
    ID_FORMA_PAGAMENTO INT NOT NULL,
    VALOR_PERCENTUAL DECIMAL(5,2) NOT NULL,
    DIAS_APOS_VENDA INT NOT NULL,
    PRIMARY KEY (ID_CONDICAO_PAGAMENTO, NUMERO_PARCELA),
    CONSTRAINT FK_Condicao FOREIGN KEY (ID_CONDICAO_PAGAMENTO) REFERENCES CONDICAO_PAGAMENTO(ID_CONDICAO_PAGAMENTO)
        ON DELETE CASCADE ON UPDATE CASCADE,
    CONSTRAINT FK_Forma FOREIGN KEY (ID_FORMA_PAGAMENTO) REFERENCES FORMA_PAGAMENTO(ID_FORMA_PAGAMENTO)
        ON DELETE RESTRICT ON UPDATE CASCADE
);

-- Tabela de países
CREATE TABLE IF NOT EXISTS PAIS
(
    ID_PAIS INT AUTO_INCREMENT PRIMARY KEY,
    NOME VARCHAR(85) NOT NULL UNIQUE,
    ATIVO BOOLEAN NOT NULL DEFAULT TRUE,
    DATA_CADASTRO DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    DATA_ULTIMA_EDICAO DATE NULL
);

-- Tabela de estados
CREATE TABLE IF NOT EXISTS ESTADO
(
    ID_ESTADO INT AUTO_INCREMENT PRIMARY KEY,
    NOME VARCHAR(58) NOT NULL,
    ID_PAIS INT NOT NULL,
    CONSTRAINT UC_Estado UNIQUE (NOME, ID_PAIS),
    CONSTRAINT FK_Estado_Pais FOREIGN KEY (ID_PAIS) REFERENCES PAIS(ID_PAIS)
        ON DELETE RESTRICT ON UPDATE CASCADE,
    ATIVO BOOLEAN NOT NULL DEFAULT TRUE,
    DATA_CADASTRO DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    DATA_ULTIMA_EDICAO DATE NULL
);

-- Tabela de cidades
CREATE TABLE IF NOT EXISTS CIDADE
(
    ID_CIDADE INT AUTO_INCREMENT PRIMARY KEY,
    NOME VARCHAR(58) NOT NULL,
    ID_ESTADO INT NOT NULL,
    CONSTRAINT UC_Cidade UNIQUE (NOME, ID_ESTADO),
    CONSTRAINT FK_Cidade_Estado FOREIGN KEY (ID_ESTADO) REFERENCES ESTADO(ID_ESTADO)
        ON DELETE RESTRICT ON UPDATE CASCADE,
    ATIVO BOOLEAN NOT NULL DEFAULT TRUE,
    DATA_CADASTRO DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    DATA_ULTIMA_EDICAO DATE NULL
);

-- Tabela de funcionários
CREATE TABLE IF NOT EXISTS FUNCIONARIO
(
    ID_FUNCIONARIO INT AUTO_INCREMENT PRIMARY KEY,
    TIPO_PESSOA CHAR(1) NOT NULL,
    NOME_RAZAO_SOCIAL VARCHAR(40) NOT NULL,
    APELIDO_NOME_FANTASIA VARCHAR(40) NULL,
    DATA_NASCIMENTO_CRIACAO DATE NOT NULL,
    CPF_CNPJ VARCHAR(14) UNIQUE NULL,
    RG_INSCRICAO_ESTADUAL VARCHAR(10) UNIQUE NOT NULL,
    EMAIL VARCHAR(40) NOT NULL,
    TELEFONE VARCHAR(20) NOT NULL,
    ENDERECO VARCHAR(40) NOT NULL,
    NUMERO_ENDERECO VARCHAR(20) NOT NULL,
    COMPLEMENTO_ENDERECO VARCHAR(40) NULL,
    BAIRRO VARCHAR(40) NOT NULL,
    ID_CIDADE INT NOT NULL,
    CEP VARCHAR(8) NULL,
    ATIVO BOOLEAN NOT NULL DEFAULT TRUE,
    MATRICULA VARCHAR(20) UNIQUE NOT NULL,
    CARGO VARCHAR(40) NOT NULL,
    SALARIO DECIMAL(10,2) NOT NULL,
    DATA_ADMISSAO DATE NOT NULL,
    DATA_DEMISSAO DATE NULL,
    TURNO VARCHAR(40) NOT NULL,
    CARGA_HORARIA INT NOT NULL,
    GENERO CHAR(1) NOT NULL,
    DATA_CADASTRO DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    DATA_ULTIMA_EDICAO DATE NULL,
    CONSTRAINT FK_Funcionario_Cidade FOREIGN KEY (ID_CIDADE) REFERENCES CIDADE(ID_CIDADE)
        ON DELETE RESTRICT ON UPDATE CASCADE
);

-- Tabela de clientes
CREATE TABLE IF NOT EXISTS CLIENTE
(
    ID_CLIENTE INT AUTO_INCREMENT PRIMARY KEY,
    TIPO_PESSOA CHAR(1) NOT NULL,
    NOME_RAZAO_SOCIAL VARCHAR(40) NOT NULL,
    APELIDO_NOME_FANTASIA VARCHAR(40) NULL,
    DATA_NASCIMENTO_CRIACAO DATE NOT NULL,
    CPF_CNPJ VARCHAR(14) UNIQUE NULL,
    RG_INSCRICAO_ESTADUAL VARCHAR(10) UNIQUE NOT NULL,
    EMAIL VARCHAR(40) NOT NULL,
    TELEFONE VARCHAR(20) NOT NULL,
    ENDERECO VARCHAR(40) NOT NULL,
    NUMERO_ENDERECO VARCHAR(20) NOT NULL,
    COMPLEMENTO_ENDERECO VARCHAR(40) NULL,
    BAIRRO VARCHAR(40) NOT NULL,
    ID_CIDADE INT NOT NULL,
    CEP VARCHAR(8) NULL,
    ATIVO BOOLEAN NOT NULL DEFAULT TRUE,
    GENERO CHAR(1) NULL,
    ID_CONDICAO_PAGAMENTO INT NOT NULL,
    LIMITE_CREDITO DECIMAL(10,2) NULL,
    DATA_CADASTRO DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    DATA_ULTIMA_EDICAO DATE NULL,
    CONSTRAINT FK_Cliente_Cidade FOREIGN KEY (ID_CIDADE) REFERENCES CIDADE(ID_CIDADE)
        ON DELETE RESTRICT ON UPDATE CASCADE,
    CONSTRAINT FK_Cliente_Condicao FOREIGN KEY (ID_CONDICAO_PAGAMENTO) REFERENCES CONDICAO_PAGAMENTO(ID_CONDICAO_PAGAMENTO)
        ON DELETE RESTRICT ON UPDATE CASCADE
);

-- Tabela de fornecedores
CREATE TABLE IF NOT EXISTS FORNECEDOR
(
    ID_FORNECEDOR INT AUTO_INCREMENT PRIMARY KEY,
    TIPO_PESSOA CHAR(1) NOT NULL,
    NOME_RAZAO_SOCIAL VARCHAR(40) NOT NULL,
    APELIDO_NOME_FANTASIA VARCHAR(40) NULL,
    DATA_NASCIMENTO_CRIACAO DATE NOT NULL,
    CPF_CNPJ VARCHAR(14) UNIQUE NULL,
    RG_INSCRICAO_ESTADUAL VARCHAR(10) UNIQUE NOT NULL,
    EMAIL VARCHAR(40) NOT NULL,
    TELEFONE VARCHAR(20) NOT NULL,
    ENDERECO VARCHAR(40) NOT NULL,
    NUMERO_ENDERECO VARCHAR(20) NOT NULL,
    COMPLEMENTO_ENDERECO VARCHAR(40) NULL,
    BAIRRO VARCHAR(40) NOT NULL,
    ID_CIDADE INT NOT NULL,
    CEP VARCHAR(8) NULL,
    ATIVO BOOLEAN NOT NULL DEFAULT TRUE,
    GENERO CHAR(1) NULL,
    ID_CONDICAO_PAGAMENTO INT NOT NULL,
    DATA_CADASTRO DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    DATA_ULTIMA_EDICAO DATE NULL,
    CONSTRAINT FK_Fornecedor_Cidade FOREIGN KEY (ID_CIDADE) REFERENCES CIDADE(ID_CIDADE)
        ON DELETE RESTRICT ON UPDATE CASCADE,
    CONSTRAINT FK_Fornecedor_Condicao FOREIGN KEY (ID_CONDICAO_PAGAMENTO) REFERENCES CONDICAO_PAGAMENTO(ID_CONDICAO_PAGAMENTO)
        ON DELETE RESTRICT ON UPDATE CASCADE
);





































USE projeto_patrica;

-- PAÍSES
INSERT INTO PAIS (NOME) VALUES
('BRASIL'), ('ARGENTINA'), ('ESTADOS UNIDOS'), ('CANADÁ'), ('ALEMANHA');

-- ESTADOS
INSERT INTO ESTADO (NOME, ID_PAIS) VALUES
('PARANÁ', 1), ('SÃO PAULO', 1), ('FLÓRIDA', 3), ('ONTÁRIO', 4), ('BAVIERA', 5);

-- CIDADES
INSERT INTO CIDADE (NOME, ID_ESTADO) VALUES
('CURITIBA', 1), ('FOZ DO IGUAÇU', 1), ('SÃO PAULO', 2), ('MIAMI', 3), ('TORONTO', 4);

-- FORMAS DE PAGAMENTO
INSERT INTO FORMA_PAGAMENTO (DESCRICAO) VALUES
('DINHEIRO'), ('CARTÃO DE CRÉDITO'), ('CARTÃO DE DÉBITO'), ('PIX'), ('BOLETO');

-- CONDIÇÕES DE PAGAMENTO
INSERT INTO CONDICAO_PAGAMENTO (DESCRICAO, QUANTIDADE_PARCELAS) VALUES
('À VISTA', 1), ('30/60 DIAS', 2), ('3X COM JUROS', 3), ('ENTRADA + 2X', 3), ('6X SEM JUROS', 6);

-- PARCELAS DA CONDIÇÃO DE PAGAMENTO
INSERT INTO PARCELA_CONDICAO_PAGAMENTO VALUES
(1, 1, 1, 100.00, 0),
(2, 1, 2, 50.00, 30), (2, 2, 2, 50.00, 60),
(3, 1, 3, 34.00, 0), (3, 2, 3, 33.00, 30), (3, 3, 3, 33.00, 60),
(4, 1, 4, 50.00, 0), (4, 2, 4, 25.00, 30), (4, 3, 4, 25.00, 60),
(5, 1, 5, 16.67, 0), (5, 2, 5, 16.67, 30), (5, 3, 5, 16.67, 60),
(5, 4, 5, 16.67, 90), (5, 5, 5, 16.67, 120), (5, 6, 5, 16.65, 150);

-- FUNCIONÁRIOS
INSERT INTO FUNCIONARIO (
    TIPO_PESSOA, NOME_RAZAO_SOCIAL, APELIDO_NOME_FANTASIA, DATA_NASCIMENTO_CRIACAO,
    CPF_CNPJ, RG_INSCRICAO_ESTADUAL, EMAIL, TELEFONE, ENDERECO, NUMERO_ENDERECO,
    COMPLEMENTO_ENDERECO, BAIRRO, ID_CIDADE, CEP, MATRICULA, CARGO, SALARIO,
    DATA_ADMISSAO, DATA_DEMISSAO, TURNO, CARGA_HORARIA, GENERO
) VALUES
('F', 'ANA CAROLINA FERREIRA', 'ANA C', '1989-05-20', '12345678901', 'RG123456', 'ana.ferreira@email.com', '45999999991', 'Rua das Flores', '123', NULL, 'Centro', 1, '80000000', 'MAT001', 'ANALISTA', 3500.00, '2020-01-01', NULL, 'MANHÃ', 40, 'F'),
('F', 'BRUNO SILVA COSTA', 'BRUNIN', '1985-11-10', '98765432100', 'RG654321', 'bruno.costa@email.com', '45999999992', 'Rua do Sol', '456', NULL, 'Bairro Novo', 2, '80000001', 'MAT002', 'SUPERVISOR', 4200.00, '2018-03-15', NULL, 'TARDE', 40, 'M'),
('F', 'CARLA MENDES LIMA', 'CARLINHA', '1991-03-05', '45678912300', 'RG789123', 'carla.mendes@email.com', '45999999993', 'Avenida Central', '789', NULL, 'Industrial', 3, '80000002', 'MAT003', 'COORDENADORA', 5000.00, '2019-06-01', NULL, 'NOITE', 40, 'F');

-- CLIENTES
INSERT INTO CLIENTE (
    TIPO_PESSOA, NOME_RAZAO_SOCIAL, APELIDO_NOME_FANTASIA, DATA_NASCIMENTO_CRIACAO,
    CPF_CNPJ, RG_INSCRICAO_ESTADUAL, EMAIL, TELEFONE, ENDERECO, NUMERO_ENDERECO,
    COMPLEMENTO_ENDERECO, BAIRRO, ID_CIDADE, CEP, GENERO, ID_CONDICAO_PAGAMENTO,
    LIMITE_CREDITO
) VALUES
('F', 'DANIEL SOUZA', 'DAN', '1990-07-10', '11122233344', 'RG456789', 'daniel.souza@email.com', '45999999994', 'Rua das Acácias', '321', NULL, 'Centro', 1, '80000003', 'M', 1, 1000.00),
('F', 'ELIANA LIMA', 'ELI', '1988-09-23', '99988877766', 'RG321654', 'eliana.lima@email.com', '45999999995', 'Rua das Orquídeas', '654', NULL, 'Bela Vista', 2, '80000004', 'F', 2, 2000.00),
('J', 'MEGATECH SOLUÇÕES LTDA', 'MEGATECH', '2010-01-01', '12345678000190', 'ISENTO', 'contato@megatech.com.br', '45999999996', 'Av. Industrial', '987', NULL, 'Zona Ind.', 3, '80000005', NULL, 3, 5000.00);

-- FORNECEDORES
INSERT INTO FORNECEDOR (
    TIPO_PESSOA, NOME_RAZAO_SOCIAL, APELIDO_NOME_FANTASIA, DATA_NASCIMENTO_CRIACAO,
    CPF_CNPJ, RG_INSCRICAO_ESTADUAL, EMAIL, TELEFONE, ENDERECO, NUMERO_ENDERECO,
    COMPLEMENTO_ENDERECO, BAIRRO, ID_CIDADE, CEP, GENERO, ID_CONDICAO_PAGAMENTO
) VALUES
('J', 'FORNECEDORA BRASIL LTDA', 'FOR BRASIL', '2015-02-14', '23456789000188', 'IE12345678', 'contato@forbrasil.com', '45999999997', 'Rua dos Negócios', '111', NULL, 'Comercial', 1, '80000006', NULL, 4),
('F', 'MARCOS PAULO DE SOUZA', 'MARCÃO', '1979-12-01', '12345678999', 'RG987654', 'marcos.souza@email.com', '45999999998', 'Av. Brasil', '222', NULL, 'Centro', 2, '80000007', 'M', 5);

