CREATE DATABASE IF NOT EXISTS projeto_patrica;
USE projeto_patrica;


CREATE TABLE IF NOT EXISTS FORMA_PAGAMENTO
(
    ID_FORMA_PAGAMENTO INT AUTO_INCREMENT PRIMARY KEY,
    DESCRICAO VARCHAR(100) NOT NULL
);



CREATE TABLE IF NOT EXISTS CONDICAO_PAGAMENTO 
(
    ID_CONDICAO_PAGAMENTO INT AUTO_INCREMENT PRIMARY KEY,
    DESCRICAO VARCHAR(100) NOT NULL,
    QUANTIDADE_PARCELAS INT NOT NULL
);



CREATE TABLE IF NOT EXISTS PARCELA_CONDICAO_PAGAMENTO 
(
    ID_CONDICAO_PAGAMENTO INT NOT NULL,
    NUMERO_PARCELA INT NOT NULL,
    ID_FORMA_PAGAMENTO INT NOT NULL,
    VALOR_PERCENTUAL DECIMAL(5,2) NOT NULL,
    DIAS_APOS_VENDA INT NOT NULL,

    PRIMARY KEY (ID_CONDICAO_PAGAMENTO, NUMERO_PARCELA),
    CONSTRAINT FK_Condicao FOREIGN KEY (ID_CONDICAO_PAGAMENTO) REFERENCES CONDICAO_PAGAMENTO(ID_CONDICAO_PAGAMENTO) ON DELETE CASCADE ON UPDATE CASCADE,
    CONSTRAINT FK_Forma FOREIGN KEY (ID_FORMA_PAGAMENTO) REFERENCES FORMA_PAGAMENTO(ID_FORMA_PAGAMENTO) ON DELETE CASCADE ON UPDATE CASCADE
);
